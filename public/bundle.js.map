{"version":3,"sources":["webpack:///webpack/bootstrap 8ae1cdfff9cf58769bef","webpack:///./frontendSRC/API.js","webpack:///./frontendSRC/entry.js","webpack:///./frontendSRC/store.js","webpack:///./frontendSRC/auth.js","webpack:///./frontendSRC/WS.js"],"names":["login","payload","fetch","method","body","JSON","stringify","then","res","json","signup","isUser","auth","data","console","log","startup","signinSubmit","document","getElementById","handlein","focus","appholder","signin","signedIn","signInEnter","e","key","signinSubmitel","click","addEventListener","signinClickHandle","removeEventListener","value","handle","replace","querySelectorAll","forEach","roomButton","classList","contains","remove","add","username","roomname","Store","room","store","rooms","userList","msgs","setRoom","bind","roomName","prototype","setHandle","innerHTML","changeUserlist","userListEl","roomChangeInput","roomChangeButton","Object","keys","i","roomEl","createElement","querySelector","roomElList","appendChild","user","li","name","button","dataset","diffUserButton","authSeq","signinButtons","anotherUserButton","type","id","signInInitialHandleMaker","a","parentElement","isuser","changeToLogin","changeToSignUp","finalize","length","style","display","input","placeholder","text","innerText","removeChild","WSmaker","subBtn","messageBox","scheme","uri","window","location","host","ws","WebSocket","onmessage","msg","parse","action","msgEl","bottomizeScroll","onerror","err","onclose","onopen","preventDefault","send","select","element","scrollTop","scrollHeight"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8ae1cdfff9cf58769bef","\n// var payloadd = {\n//     username: 'timlkjkh',\n//     password: 'passsssssss'\n// };\n\nexport const login = (payload)=>fetch(\"http://localhost:3000/api/login\",\n        {\n            method: \"POST\",\n            body: JSON.stringify(payload),\n        })\n        .then((res)=>res.json())\n\nexport const signup = (payload) => fetch(\"http://localhost:3000/api/signup\",\n    {\n        method: \"POST\",\n        body: JSON.stringify(payload),\n    })\n    .then((res) => res.json())\nexport const isUser = (payload) => fetch(\"http://localhost:3000/api/isuser\",\n    {\n        method: \"POST\",\n        body: JSON.stringify(payload),\n    })\n    .then(function (res) { return res.json(); })\n\n\nconst auth = ()=> fetch(\"http://localhost:3000/api/login\",\n    {\n        method: \"POST\",\n        body: JSON.stringify(payload),\n    //auth headers  //  // headers: new Headers({ 'authentication': 'jwt start' })\n    })\n    .then(function (res) { return res.json(); })\n    .then(function (data) { console.log(JSON.stringify(data)) })\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./frontendSRC/API.js","import store from './store';\n// import WSmaker from './WS';\nimport {login,signup,isUser} from './API'\nimport {authSeq} from './auth';\n\n\nconst startup = () => {\n\n    const signinSubmit = document.getElementById('signin-submit');\n    const handlein = document.getElementById('handle-Signin');\n    handlein.focus();\n    const appholder = document.getElementById('appholder');\n    const signin = document.getElementById('signin');\n    let signedIn = false;\n\n    //one time event\n    //binds enter to signin button then unbinds it (it gets rebound to submit messages)\n    \n    const signInEnter = function (e){\n        if (e.key == 'Enter') {\n            const signinSubmitel = document.getElementById('signin-submit');\n            signinSubmitel.click();\n            \n        }\n    }\n    document.addEventListener('keypress', signInEnter);\n\n    //sets name in store and intializes websocket connection\n    \n    const signinClickHandle = () => {\n        document.removeEventListener('keypress', signInEnter);\n        console.log('login attempt',handlein.value);\n        let handle = handlein.value.replace(/\\s+/g, '');\n        console.log(authSeq);\n        handlein.value = ''\n        authSeq(handle,store);\n        signinSubmit.removeEventListener('click', signinClickHandle);\n        \n\n        \n    };\n    signinSubmit.addEventListener('click', signinClickHandle)\n\n    document.getElementById('userlistLabel').addEventListener('click',(e)=>{\n        document.querySelectorAll('.room').forEach((roomButton)=>{\n            roomButton.classList.contains('collapse') ? roomButton.classList.remove('collapse') : roomButton.classList.add('collapse');\n        })  \n    })\n\n};\n\ndocument.addEventListener('DOMContentLoaded', startup);\n\n\n\n\n// WEBPACK FOOTER //\n// ./frontendSRC/entry.js","\nconst username = document.getElementById('username');\nconst roomname = document.getElementById('roomname')\nconst Store = function(){\n    this.handle = ''\n    this.room = 'general'\n    this.store = {};\n    this.rooms = {};\n    this.userList={}\n    this.msgs = [];\n    this.setRoom = this.setRoom.bind(this);\n    this.roomName = this.roomName.bind(this);\n} \n\n\nStore.prototype.setHandle = function(handle){\n    this.handle = handle\n    username.innerHTML = `<h1>${this.handle}</h1>`\n}\nStore.prototype.roomName = function(){\n    return this.room\n}\nStore.prototype.setRoom = function(room){\n    this.room = room;\n    document.getElementById('roomname').innerHTML = `<h1>${this.roomName()}</h1>`\n}\n\n\nStore.prototype.changeUserlist = function(rooms,userList){\n    this.userList = userList;\n    this.rooms=rooms;\n    const userListEl = document.getElementById('userList');\n    userListEl.innerHTML=''\n\n    const roomChangeInput = document.getElementById('roomChangeInput');\n    const roomChangeButton = document.getElementById('roomChangeButton')\n\n    Object.keys(this.rooms).forEach((room,i)=>{\n\n\n        const roomEl = document.createElement('li');\n        roomEl.innerHTML = `<div><button id=roomButton data-room=${room}>${room}</button><button data-room=${room} id='collapseRoom'>[x]</button</div>`\n        roomEl.classList.add('room')\n        roomEl.querySelector('#collapseRoom').addEventListener('click',(e)=>{\n            roomEl.classList.contains('collapse') ? roomEl.classList.remove('collapse') : roomEl.classList.add('collapse');\n        })\n        const roomElList = document.createElement('ul');\n        roomElList.classList.add('roomUserList')\n        \n        roomEl.appendChild(roomElList);\n        userListEl.appendChild(roomEl)\n\n        rooms[room].forEach((user)=>{\n            console.log('userlist', typeof (user), user);\n            const li = document.createElement('li');\n            li.innerHTML = `<button id='userButton' data-name=${user.name}'>${user.name}</button>`\n            roomElList.appendChild(li);\n        })\n        \n        document.querySelectorAll('#roomButton').forEach((button)=>{\n            button.addEventListener('click',(e)=>{\n                console.log(button.dataset.room)\n                roomChangeInput.value = button.dataset.room\n                roomChangeButton.click();\n            })\n        })\n\n        document.querySelectorAll('#userButton').forEach((button) => {\n            button.addEventListener('click', (e) => {\n                console.log(button.dataset.name)\n            })\n        })\n\n    })\n\n}\n\n\nconst store = new Store()\nexport default store;\n\n\n\n// WEBPACK FOOTER //\n// ./frontendSRC/store.js","\nimport WSmaker from './WS';\nimport { login, signup, isUser } from './API'\n\nconst diffUserButton = document.createElement('input')\n\nexport const authSeq = function(handle,store){\n    isUser({\"username\":handle}).then((res) => {\n        const signinButtons = document.getElementById('signin-buttons');\n        const anotherUserButton = document.createElement('INPUT');\n        anotherUserButton.type='submit';\n        anotherUserButton.value='Another User';\n        anotherUserButton.id='anotherUserButton';\n        anotherUserButton.addEventListener('click', signInInitialHandleMaker(store))\n        \n        let a = signinButtons.appendChild(anotherUserButton);\n        console.log(signinButtons, anotherUserButton,a.parentElement);\n        console.log('registered:', res.isuser);\n        if (res.isuser) {\n            changeToLogin(handle, store);\n            // inform that they will be signing up\n            //get password, signup\n        } else {\n            \n            changeToSignUp(handle, store);\n            //inform that they will be loggin in\n            //get password, try to login\n\n        }\n    })\n\n\n\n\n}\n\nconst finalize = (handle,store) =>{\n    // signedIn = true;\n    store.setHandle(handle.length > 1 ? handle : 'anon');\n\n    WSmaker(store);\n    appholder.classList.remove('blur');\n    signin.style.display = 'none';\n}\nconst changeToSignUp = (handle) => {\n    const input = document.getElementById('handle-Signin');\n    input.placeholder= 'enter Password';\n    const signin = document.getElementById('signin');\n    const text = signin.querySelector('h1')\n    text.innerText = `-${handle}- not registered, enter a password to create an account or press guest`\n    const signinSubmit = document.getElementById('signin-submit');\n    signinSubmit.addEventListener('click',()=>{\n        console.log(\"signing\", input.value)\n    })\n\n}\nconst changeToLogin = (handle) => {\n    const input = document.getElementById('handle-Signin');\n    input.placeholder = 'enter Password';\n    const signin = document.getElementById('signin');\n    const text = signin.querySelector('h1')\n    text.innerText = `welcome back, -${handle}- , please enter password`\n    const signinSubmit = document.getElementById('signin-submit');\n    signinSubmit.addEventListener('click', () => {\n        console.log(\"login\", input.value)\n    })\n\n}\nconst signInInitialHandleMaker = (store)=>()=>{\n    const anotherUserButton = document.getElementById('anotherUserButton');\n    anotherUserButton.parentElement.removeChild(anotherUserButton);\n\n    const signinSubmit = document.getElementById('signin-submit');\n    const handlein = document.getElementById('handle-Signin');\n    handlein.focus();\n    const appholder = document.getElementById('appholder');\n    const signin = document.getElementById('signin');\n    let signedIn = false;\n\n    const input = document.getElementById('handle-Signin');\n    input.placeholder = 'enter username';\n    const text = signin.querySelector('h1')\n    text.innerText = `Welcome To Chat, please enter a name or press guest`\n\n\n    const signInEnter = function (e) {\n        if (e.key == 'Enter') {\n            const signinSubmitel = document.getElementById('signin-submit');\n            signinSubmitel.click();\n\n        }\n    }\n    document.addEventListener('keypress', signInEnter);\n\n    const signinClickHandle = () => {\n        document.removeEventListener('keypress', signInEnter);\n        console.log('login attempt', handlein.value);\n        let handle = handlein.value.replace(/\\s+/g, '');\n        console.log(authSeq);\n        handlein.value = ''\n        authSeq(handle, store);\n        signinSubmit.removeEventListener('click', signinClickHandle);\n\n\n\n    };\n    signinSubmit.addEventListener('click', signinClickHandle)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./frontendSRC/auth.js","\n\nconst WSmaker = (store) =>{\n    // console.log('loaded');\n    const subBtn = document.getElementById('submit');\n    const handle = store.handle;\n    const input = document.getElementById('chatin');\n    input.focus();\n    const messageBox = document.getElementById('messageBox');\n\n    const roomChangeInput = document.getElementById('roomChangeInput');\n    const roomChangeButton = document.getElementById('roomChangeButton')\n\n    const scheme = \"ws://\";\n    const uri = scheme + window.document.location.host + \"/\"+handle;\n    const ws = new WebSocket(uri);\n\n    ws.onmessage = (msg)=>{\n        const data = JSON.parse(msg.data);\n        if (data.action === 'msg'){\n            const msgEl = document.createElement('li');\n            msgEl.innerHTML = `\n        <h1>${data.handle}: ${data.text}</h1>\n        `;\n            messageBox.appendChild(msgEl);\n            bottomizeScroll();\n        }else{\n            console.log('RECEIVED WS COMMAND',data.action,data.payload,data)\n            switch(data.action){\n                case \"userList\":\n                    store.changeUserlist(data.payload.rooms,data.payload.userList);\n                    break;\n                default:\n                    console.log('unknown action',data)\n            }\n        }\n        \n    };\n\n    ws.onerror = (err) =>{\n         console.log('web socket error',err);\n    };\n\n    ws.onclose = (e) =>{\n         console.log('websocket closing',e);\n    };\n\n    ws.onopen = (e) =>{\n    };\n\n    // send message\n    subBtn.addEventListener('click',(e)=>{\n        \n        e.preventDefault();\n        const text = input.value;\n\n        console.log('submit clicked', handle, text);\n\n        ws.send(JSON.stringify({\n            action:'msg',\n            room:store.roomName(),\n            handle:handle,\n            text:text\n        }));\n\n        const msgEl = document.createElement('li');\n        msgEl.innerHTML = `\n        <h1>${handle}: ${text}</h1>\n        `;\n        msgEl.classList.add('myMessage')\n        messageBox.appendChild(msgEl);\n        bottomizeScroll();\n\n\n        input.value=\"\";\n        input.select();\n    });\n    //send message by pressing enter\n    document.addEventListener('keypress', (e) => {\n        if (e.key == 'Enter') {\n            subBtn.click();\n        }\n    });\n\n    //change rooms\n    roomChangeButton.addEventListener('click',(e)=>{\n        store.setRoom(roomChangeInput.value);\n        roomChangeInput.value = ''\n        ws.send(JSON.stringify({\n            action: 'roomChange',\n            payload:{\n                room: store.room\n            }\n        }));\n\n    })\n\n};\n\nfunction bottomizeScroll() {\n    var element = document.getElementById(\"messages\");\n    element.scrollTop = element.scrollHeight;\n}\n\nexport default WSmaker;\n\n\n// WEBPACK FOOTER //\n// ./frontendSRC/WS.js"],"sourceRoot":""}