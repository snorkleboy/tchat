{"version":3,"sources":["webpack:///webpack/bootstrap ee11a2f7302f97827c76","webpack:///./frontendSRC/entry.js","webpack:///./frontendSRC/store.js","webpack:///./frontendSRC/WS.js"],"names":["document","addEventListener","signinSubmit","getElementById","handlein","appholder","signin","console","log","value","length","classList","remove","style","display","Store","store","userList","rooms","msgs","prototype","changeUserlist","userlist","forEach","user","WSmaker","clientName","subBtn","chat","input","messageBox","scheme","uri","window","location","host","ws","WebSocket","onmessage","msg","data","JSON","parse","action","msgEl","createElement","innerHTML","handle","text","appendChild","bottomizeScroll","payload","onerror","err","onclose","e","onopen","send","stringify","preventDefault","name","room","select","key","click","element","scrollTop","scrollHeight"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ee11a2f7302f97827c76","import store from './store';\nimport WSmaker from './WS';\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n    const signinSubmit = document.getElementById('signin-submit');\n    const handlein = document.getElementById('handle-Signin');\n    const appholder = document.getElementById('appholder');\n    const signin = document.getElementById('signin');\n\n    signinSubmit.addEventListener('click', () => {\n        console.log(handlein.value);\n        WSmaker(handlein.value.length > 1 ? handlein.value : 'anon', store);\n        appholder.classList.remove('blur');\n        signin.style.display = 'none';\n    })\n});\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./frontendSRC/entry.js","const Store = function(){\n    this.store = {};\n    this.userList = {};\n    this.rooms = {};\n    this.msgs = [];\n} \nStore.prototype.changeUserlist = function(userlist){\n    const userList = document.getElementById('userList');\n    userlist.forEach((user)=>{\n        console.log('userlist',user);\n    })\n\n}\nconst store = new Store()\nexport default store;\n\n\n\n// WEBPACK FOOTER //\n// ./frontendSRC/store.js","\n\nconst WSmaker = (clientName, store) =>{\n    // console.log('loaded');\n    const subBtn = document.getElementById('submit');\n    const chat = clientName;\n    const input = document.getElementById('chatin');\n    const messageBox = document.getElementById('messageBox');\n\n    const scheme = \"ws://\";\n    const uri = scheme + window.document.location.host + \"/\"+chat;\n    const ws = new WebSocket(uri);\n\n    // console.log(ws);\n    // console.log(uri);\n    ws.onmessage = (msg)=>{\n        // console.log('received:',msg);\n        const data = JSON.parse(msg.data);\n        if (data.action === 'msg'){\n            const msgEl = document.createElement('li');\n            msgEl.innerHTML = `\n        <h1>${data.handle}: ${data.text}</h1>\n        `;\n            messageBox.appendChild(msgEl);\n            bottomizeScroll();\n        }else{\n            console.log('RECEIVED WS COMMAND',data)\n            switch(data.action){\n                case 'userList':\n                    store.changeUserlist(data.payload);\n                default:\n                    console.log('unknown action',data)\n            }\n        }\n        \n    };\n\n    ws.onerror = (err) =>{\n         console.log('web socket error',err);\n    };\n\n    ws.onclose = (e) =>{\n         console.log('websocket closing',e);\n    };\n\n    ws.onopen = (e) =>{\n        ws.send(JSON.stringify({\n            'action': 'newUser',\n            'payload':{'name':chat,'room':'general'}\n        }))\n    };\n\n    subBtn.addEventListener('click',(e)=>{\n        \n        e.preventDefault();\n        const handle = chat.name;\n        const text = input.value;\n\n        console.log('submit clicked', handle, text);\n\n        ws.send(JSON.stringify({\n            action:'msg',\n            room:'general',\n            handle:handle,\n            text:text\n        }));\n\n        const msgEl = document.createElement('li');\n        msgEl.innerHTML = `\n        <h1>${handle}: ${text}</h1>\n        `;\n        messageBox.appendChild(msgEl);\n        bottomizeScroll();\n\n\n        input.value=\"\";\n        input.select();\n    });\n    document.addEventListener('keypress', (e) => {\n        if (e.key == 'Enter') {\n            subBtn.click();\n        }\n    });\n\n};\n\nfunction bottomizeScroll() {\n    var element = document.getElementById(\"messages\");\n    element.scrollTop = element.scrollHeight;\n}\n\nexport default WSmaker;\n\n\n// WEBPACK FOOTER //\n// ./frontendSRC/WS.js"],"sourceRoot":""}